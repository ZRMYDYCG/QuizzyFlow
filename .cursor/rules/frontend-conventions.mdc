---
globs: *.ts,*.tsx,*.jsx,*.js
description: Frontend React and TypeScript coding conventions
---

# Frontend Development Conventions

## TypeScript Guidelines

### Strict Typing
- Always define explicit types for function parameters and return values
- Use interfaces for component props (prefix with `I` for interfaces)
- Define default data constants for components (suffix with `DefaultData`)

### Import Conventions
- Use `@/` path alias for imports from `src/`
- Import React as: `import React from 'react'`
- Group imports: React → Third-party → Local components → Utilities → Types

Example:
```typescript
import React from 'react'
import { Input, Typography } from 'antd'
import { IQuestionInputProps, QuestionInputDefaultData } from './interface.ts'
```

## Component Development

### React Components
- Use functional components with TypeScript
- Props should be typed with interfaces
- Destructure props with defaults from default data
- Use the pattern: `const { prop1, prop2 } = { ...DefaultData, ...props }`

Example Component Structure:
```typescript
import React from 'react'
import { IComponentProps, ComponentDefaultData } from './interface.ts'

const Component: React.FC<IComponentProps> = (props: IComponentProps) => {
  const { title, placeholder } = { ...ComponentDefaultData, ...props }
  
  return (
    <div>{/* component JSX */}</div>
  )
}

export default Component
```

### Component Files Organization
Each material component should have:
- `index.tsx` - Main component implementation
- `interface.ts` - TypeScript interfaces and default data
- `index.ts` - Component config and exports
- Property editor component (e.g., `input-props.tsx`)

## Redux/State Management

### Store Organization
- Modules are in [src/store/modules/](mdc:src/store/modules)
- Use Redux Toolkit's `createSlice`
- Export both reducer and actions
- Define state type interfaces

### Using Redux Hooks
- Import typed hooks if available: `useAppDispatch`, `useAppSelector`
- Use `useSelector` for reading state
- Use `useDispatch` for dispatching actions

### Undo/Redo Aware Development
- The `questionComponent` store has undo/redo enabled (20 steps)
- Actions like `changeSelectedId` are excluded from undo history
- Avoid creating actions that would pollute undo history for UI-only state changes

## Routing Patterns

### Route Structure (from [src/router/index.tsx](mdc:src/router/index.tsx))
- `/` - Home layout (public pages)
- `/manage/*` - Management layout (list, star, trash)
- `/question/edit/:id` - Question editor
- `/question/statistics/:id` - Question statistics
- `/question/publish/:id` - Question publish view

### Navigation
- Use `useNavigate()` hook for programmatic navigation
- Use `useParams()` for route parameters
- Use `<Link>` component for declarative navigation

## Styling Guidelines

### Tailwind CSS
- Primary styling method via utility classes
- Config in [tailwind.config.ts](mdc:tailwind.config.ts)
- Use `cn()` helper from `tailwind-merge` for conditional classes

### Ant Design
- Use Ant Design components as base UI
- Follow Ant Design design system
- Use Typography components for text

### CSS Modules (if used)
- Use camelCase for class names
- File naming: `component.module.css`

## API Integration

### API Calls
- API utilities in [src/api/](mdc:src/api)
- Use axios for HTTP requests
- API base path: `/api` (proxied to backend)
- Always handle loading and error states

### Authentication
- JWT token stored in localStorage/sessionStorage
- Include token in request headers
- Handle 401 responses (redirect to login)

## Custom Hooks

Custom hooks are in [src/hooks/](mdc:src/hooks):
- `useLoadQuestionData` - Load question data
- `useLoadUserData` - Load user authentication data
- `useNavPage` - Navigation utilities
- `useGetComponentInfo` - Get component state from store
- `useCanvasKeyPress` - Handle canvas keyboard shortcuts
- `useManageTheme` - Theme management

## Performance Best Practices

### Code Splitting
- Lazy load routes when possible
- Use `React.lazy()` and `Suspense` for heavy components
- Vite automatically splits vendor chunks (see [vite.config.ts](mdc:vite.config.ts))

### Optimization
- Use `React.memo()` for expensive components
- Use `useMemo()` and `useCallback()` to prevent unnecessary re-renders
- Avoid inline function definitions in props when possible

## Testing Considerations

- Component tests should be colocated or in `__tests__` directories
- Test user interactions, not implementation details
- Mock API calls in tests
