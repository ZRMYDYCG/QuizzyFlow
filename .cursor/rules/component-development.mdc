---
description: Guidelines for creating new material components in the QuizzyFlow editor
---

# Material Component Development Guide

This guide explains how to create new question/form components for the QuizzyFlow editor.

## Component Location

All material components are in [src/components/material/](mdc:src/components/material)

## Component Structure

Each component should follow this directory structure:

```
src/components/material/question-<name>/
  ├── index.tsx           # Main component implementation
  ├── interface.ts        # TypeScript interfaces and defaults
  ├── <name>-props.tsx    # Property editor component (optional)
  └── index.ts            # Component configuration
```

## Step-by-Step Guide

### 1. Create Component Interface (`interface.ts`)

Define the component's props interface and default data:

```typescript
/**
 * @description Component description
 */
export interface IQuestionComponentProps {
  // Property descriptions
  title?: string
  placeholder?: string
  disabled?: boolean
  onChange?: (value: IQuestionComponentProps) => void
}

export const QuestionComponentDefaultData: IQuestionComponentProps = {
  title: 'Default Title',
  placeholder: 'Enter text...',
  disabled: false,
}
```

**Naming Conventions:**
- Interface: `IQuestion<Name>Props`
- Default data: `Question<Name>DefaultData`
- Use optional properties (`?`) for non-required props
- Include an `onChange` callback if the component accepts user input

### 2. Create Main Component (`index.tsx`)

Implement the component using React and Ant Design:

```typescript
import React from 'react'
import { Input, Typography } from 'antd'
import { IQuestionComponentProps, QuestionComponentDefaultData } from './interface.ts'

const QuestionComponent: React.FC<IQuestionComponentProps> = (
  props: IQuestionComponentProps
) => {
  const { title, placeholder, disabled } = { 
    ...QuestionComponentDefaultData, 
    ...props 
  }

  return (
    <div>
      <Typography.Paragraph strong>{title}</Typography.Paragraph>
      <div>
        <Input 
          placeholder={placeholder} 
          disabled={disabled}
        />
      </div>
    </div>
  )
}

export default QuestionComponent
```

**Key Points:**
- Use functional components with TypeScript
- Destructure props with defaults: `{ ...DefaultData, ...props }`
- Use Ant Design components for consistency
- Keep components simple and focused

### 3. Create Property Editor (Optional)

For components with editable properties, create a property editor:

```typescript
import React from 'react'
import { Form, Input, Switch } from 'antd'
import { IQuestionComponentProps } from './interface.ts'

interface PropComponentProps {
  value?: IQuestionComponentProps
  onChange?: (value: IQuestionComponentProps) => void
}

const PropComponent: React.FC<PropComponentProps> = ({ value, onChange }) => {
  const handleChange = (key: string, val: any) => {
    if (onChange) {
      onChange({
        ...value,
        [key]: val,
      })
    }
  }

  return (
    <Form layout="vertical">
      <Form.Item label="Title">
        <Input 
          value={value?.title}
          onChange={(e) => handleChange('title', e.target.value)}
        />
      </Form.Item>
      
      <Form.Item label="Placeholder">
        <Input 
          value={value?.placeholder}
          onChange={(e) => handleChange('placeholder', e.target.value)}
        />
      </Form.Item>
      
      <Form.Item label="Disabled">
        <Switch 
          checked={value?.disabled}
          onChange={(val) => handleChange('disabled', val)}
        />
      </Form.Item>
    </Form>
  )
}

export default PropComponent
```

### 4. Create Component Configuration (`index.ts`)

Export component configuration for the component registry:

```typescript
import Component from './index.tsx'
import PropComponent from './component-props.tsx'
import { IQuestionComponentProps, QuestionComponentDefaultData } from './interface.ts'

export default {
  title: 'Component Display Name',
  type: 'question-component',  // Must be unique
  Component,                   // Main component
  PropComponent,               // Property editor
  defaultProps: QuestionComponentDefaultData,
}

export { Component, PropComponent, IQuestionComponentProps, QuestionComponentDefaultData }
```

### 5. Register Component

Add the new component to the main component registry in [src/components/material/index.ts](mdc:src/components/material/index.ts):

```typescript
import QuestionComponent from './question-component'

// Add to exports
export { QuestionComponent }

// Add to component group (if applicable)
export const formComponents = [
  // ... existing components
  QuestionComponent,
]
```

## Component Categories

Components are typically organized into these categories:

### 1. Form Input Components
- Text inputs (input, textarea)
- Selection (radio, checkbox, select, dropdown)
- Date/Time (date, timer)
- File upload
- Advanced inputs (slider, rate, color picker)

### 2. Display Components
- Text (title, paragraph, quote, highlight)
- Media (image, video, audio, qrcode)
- Data visualization (table, chart, statistic)

### 3. Layout Components
- Containers (tabs, collapse, drawer, modal)
- Navigation (menu, anchor, steps, timeline)
- Organization (divider, separator)

### 4. Interactive Components
- Buttons and actions
- Feedback (alert, tooltip, popover, spin)
- Status displays (progress, skeleton, empty, result)

### 5. Advanced Components
- Timer and countdown
- Signature pad
- Matrix/grid questions
- Ranking
- Word cloud

## Best Practices

### Component Design

1. **Keep it Simple**: Each component should do one thing well
2. **Follow Ant Design**: Use Ant Design components as building blocks
3. **Responsive Design**: Ensure components work on different screen sizes
4. **Accessibility**: Include proper ARIA labels and keyboard navigation

### Props and State

1. **Minimal Props**: Only include necessary props in the interface
2. **Sensible Defaults**: Provide good default values in DefaultData
3. **Controlled Components**: Form inputs should be controlled when possible
4. **Prop Validation**: Use TypeScript strictly

### Styling

1. **Use Tailwind**: Prefer Tailwind utility classes
2. **Ant Design Theme**: Respect Ant Design's design system
3. **Spacing**: Use consistent spacing (Tailwind spacing scale)
4. **Colors**: Use theme colors from Ant Design or Tailwind config

### Performance

1. **Memoization**: Use `React.memo()` for expensive render components
2. **Lazy Loading**: Heavy components can be lazy loaded
3. **Avoid Inline Functions**: Define handlers outside of JSX when possible
4. **Optimize Re-renders**: Use `useMemo` and `useCallback` appropriately

## Component Props Pattern

All question components in the data structure have these common fields:

```typescript
{
  fe_id: string,           // Frontend unique ID (generated by nanoid)
  type: string,            // Component type (e.g., 'question-input')
  title: string,           // Component title/label
  isHidden: boolean,       // Visibility flag
  isLocked: boolean,       // Lock flag (prevents editing)
  props: {                 // Component-specific properties
    // Your component's props here
  }
}
```

When designing your component:
- The `props` object contains your component's specific configuration
- `fe_id`, `type`, `title`, `isHidden`, `isLocked` are managed by the editor
- Your component receives the `props` object as its props

## Testing Components

### Manual Testing
1. Add component to a questionnaire in the editor
2. Test all property configurations
3. Test in both edit and preview modes
4. Test responsiveness on different screen sizes
5. Test with keyboard navigation

### Checklist
- [ ] Component renders correctly with default props
- [ ] All props work as expected
- [ ] Property editor updates component in real-time
- [ ] Component is responsive
- [ ] Accessibility features work
- [ ] No console errors or warnings
- [ ] Performance is acceptable

## Common Components to Reference

Study these existing components as examples:

- **Simple Component**: [question-input](mdc:src/components/material/question-input/index.tsx)
- **Complex Component**: [question-table](mdc:src/components/material/question-table)
- **With Rich Props**: [question-title](mdc:src/components/material/question-title)
- **Interactive**: [question-button](mdc:src/components/material/question-button)

## Component Data Flow

1. **In Editor**: Component receives props from Redux store
2. **Property Editor**: User edits props in right panel
3. **Redux Action**: Props update dispatched to store
4. **Re-render**: Component re-renders with new props
5. **In Published Form**: Component renders with final props configuration
